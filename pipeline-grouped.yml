dag: true
steps:
  - group: required
    key: required
    steps:
      - command: echo 1
      - command: sleep 15

  - group: uploads
    steps:
      - label: Upload A
        command: buildkite-agent pipeline upload a.yml
      - label: Upload B
        command: buildkite-agent pipeline upload b.yml
      - label: Upload C
        command: buildkite-agent pipeline upload c.yml

  - label: Upload A Parallelised
    command: buildkite-agent pipeline upload a.yml
    parallelism: 2

  - label: "Parallel"
    command: "true"
    parallelism: 3
